import{_ as A}from"./BKSQtRzV.js";import{_ as F}from"./BbuEuYlL.js";import{_ as K,a as R,b as j,c as U,d as H,e as M}from"./C-hzYLZz.js";import{g as q,j as z,c as y,a as d,b as n,w as e,x as P,y as X,k as _,q as C,F as w,r as B,n as g,o as i,d as a,t as u,l as b}from"./DsjOer2v.js";import{_ as G}from"./BIk-UJZc.js";import{u as J,_ as Q}from"./Cg97V0GM.js";import"./PBMIlgjC.js";const W={class:"mb-6 flex items-center justify-between"},Y={class:"mb-4 flex flex-wrap gap-3"},Z=["value"],ut=q({__name:"bookings",setup(h){const D=J(),v=g([]),x=g(!0),f=g(""),m=g("");async function p(){x.value=!0;try{const l={};f.value&&(l.status=f.value),m.value&&(l.date=m.value);const{data:t}=await D.get("/admin/bookings",{params:l});v.value=t||[]}catch(l){console.error(l)}finally{x.value=!1}}z(p);function $(l){return l==="BOOKED"?"default":l==="LOCKED"?"secondary":"outline"}function E(l){return new Date(l).toLocaleString()}function k(l){return l?.substring(0,8)+"..."}return(l,t)=>{const V=A,L=F,r=U,c=j,S=R,s=M,T=G,I=H,O=K,N=Q;return i(),y("div",null,[d("div",W,[t[3]||(t[3]=d("h1",{class:"text-2xl font-bold tracking-tight"},"Bookings",-1)),n(V,{variant:"outline",size:"sm",onClick:p},{default:e(()=>[...t[2]||(t[2]=[a("Refresh",-1)])]),_:1})]),d("div",Y,[P(d("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>C(f)?f.value=o:null),onChange:p,class:"rounded-md border border-input bg-background px-3 py-2 text-sm"},[t[4]||(t[4]=d("option",{value:""},"All Statuses",-1)),(i(),y(w,null,B(["LOCKED","BOOKED","CANCELLED","EXPIRED"],o=>d("option",{key:o,value:o},u(o),9,Z)),64))],544),[[X,_(f)]]),n(L,{modelValue:_(m),"onUpdate:modelValue":t[1]||(t[1]=o=>C(m)?m.value=o:null),type:"date",class:"w-auto",onChange:p},null,8,["modelValue"])]),n(N,null,{default:e(()=>[n(O,null,{default:e(()=>[n(S,null,{default:e(()=>[n(c,null,{default:e(()=>[n(r,null,{default:e(()=>[...t[5]||(t[5]=[a("ID",-1)])]),_:1}),n(r,null,{default:e(()=>[...t[6]||(t[6]=[a("User",-1)])]),_:1}),n(r,null,{default:e(()=>[...t[7]||(t[7]=[a("Showtime",-1)])]),_:1}),n(r,null,{default:e(()=>[...t[8]||(t[8]=[a("Seats",-1)])]),_:1}),n(r,null,{default:e(()=>[...t[9]||(t[9]=[a("Status",-1)])]),_:1}),n(r,null,{default:e(()=>[...t[10]||(t[10]=[a("Created",-1)])]),_:1})]),_:1})]),_:1}),n(I,null,{default:e(()=>[_(x)?(i(),b(c,{key:0},{default:e(()=>[n(s,{colspan:"6",class:"py-10 text-center text-muted-foreground"},{default:e(()=>[...t[11]||(t[11]=[a("Loading...",-1)])]),_:1})]),_:1})):_(v).length===0?(i(),b(c,{key:1},{default:e(()=>[n(s,{colspan:"6",class:"py-10 text-center text-muted-foreground"},{default:e(()=>[...t[12]||(t[12]=[a("No bookings found",-1)])]),_:1})]),_:1})):(i(!0),y(w,{key:2},B(_(v),o=>(i(),b(c,{key:o.id},{default:e(()=>[n(s,{class:"font-mono text-xs"},{default:e(()=>[a(u(k(o.id)),1)]),_:2},1024),n(s,null,{default:e(()=>[a(u(k(o.userId)),1)]),_:2},1024),n(s,null,{default:e(()=>[a(u(k(o.showtimeId)),1)]),_:2},1024),n(s,null,{default:e(()=>[a(u(o.seats?.join(", ")),1)]),_:2},1024),n(s,null,{default:e(()=>[n(T,{variant:$(o.status)},{default:e(()=>[a(u(o.status),1)]),_:2},1032,["variant"])]),_:2},1024),n(s,{class:"text-muted-foreground"},{default:e(()=>[a(u(E(o.createdAt)),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})])}}});export{ut as default};
