import{u as G,_ as M}from"./Cg97V0GM.js";import{_ as T}from"./ClKX_v3o.js";import{_ as U}from"./DYlD4L2L.js";import{_ as z,a as E}from"./BIHxU0IE.js";import{_ as H}from"./BKSQtRzV.js";import{_ as I}from"./sjmK8UFO.js";import{_ as F}from"./BbuEuYlL.js";import{g as W,e as j,p as q,c as k,b as o,w as l,o as w,a as t,d as f,k as s,t as g,m as L,q as A,n as u,s as V,G as P,v as R}from"./DsjOer2v.js";import"./PBMIlgjC.js";const O={class:"flex min-h-[60vh] items-center justify-center"},Y={key:0,class:"rounded-lg bg-destructive/10 p-3 text-sm text-destructive"},J={class:"relative"},K={class:"absolute inset-0 flex items-center"},Q={class:"space-y-2"},X={class:"space-y-2"},de=W({__name:"login",setup(Z){const{$firebaseAuth:$}=j(),x=G(),y=q(),m=u("user@demo.com"),c=u("Demo User"),i=u(!1),r=u(!1),n=u("");async function C(a){i.value=!0,n.value="";try{const{data:e}=await x.post("/auth/login",{email:m.value,name:c.value,demo:!0,role:a});y.setAuth({user:e.user,token:e.token}),V("/")}catch(e){n.value=e.response?.data?.error||"Login failed"}finally{i.value=!1}}async function h(){r.value=!0,n.value="";try{const a=new P,_=await(await R($,a)).user.getIdToken(),{data:p}=await x.post("/auth/google",{id_token:_});y.setAuth({user:p.user,token:p.token}),V("/")}catch(a){a.code==="auth/popup-closed-by-user"?n.value="Sign-in popup was closed":a.code==="auth/cancelled-popup-request"||(n.value=a.response?.data?.error||a.message||"Google sign-in failed")}finally{r.value=!1}}return(a,e)=>{const _=E,p=z,v=H,S=I,b=F,B=T,N=U,D=M;return w(),k("div",O,[o(D,{class:"w-full max-w-md"},{default:l(()=>[o(p,{class:"text-center"},{default:l(()=>[e[5]||(e[5]=t("div",{class:"mb-2 text-4xl"},"ðŸŽ¬",-1)),o(_,{class:"text-2xl"},{default:l(()=>[...e[4]||(e[4]=[f("Welcome to Cinema",-1)])]),_:1}),e[6]||(e[6]=t("p",{class:"text-sm text-muted-foreground"},"Sign in to book your seats",-1))]),_:1}),o(B,{class:"space-y-4"},{default:l(()=>[s(n)?(w(),k("div",Y,g(s(n)),1)):L("",!0),o(v,{class:"w-full gap-2",variant:"outline",disabled:s(r)||s(i),onClick:h},{default:l(()=>[e[7]||(e[7]=t("svg",{class:"h-5 w-5",viewBox:"0 0 24 24"},[t("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z",fill:"#4285F4"}),t("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),t("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),t("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})],-1)),f(" "+g(s(r)?"Signing in...":"Sign in with Google"),1)]),_:1},8,["disabled"]),t("div",J,[t("div",K,[o(S,{class:"w-full"})]),e[8]||(e[8]=t("div",{class:"relative flex justify-center text-xs uppercase"},[t("span",{class:"bg-card px-2 text-muted-foreground"},"Or demo login")],-1))]),t("div",Q,[e[9]||(e[9]=t("label",{class:"text-sm font-medium"},"Email",-1)),o(b,{modelValue:s(m),"onUpdate:modelValue":e[0]||(e[0]=d=>A(m)?m.value=d:null),type:"email",placeholder:"your@email.com"},null,8,["modelValue"])]),t("div",X,[e[10]||(e[10]=t("label",{class:"text-sm font-medium"},"Display Name",-1)),o(b,{modelValue:s(c),"onUpdate:modelValue":e[1]||(e[1]=d=>A(c)?c.value=d:null),type:"text",placeholder:"Your name"},null,8,["modelValue"])])]),_:1}),o(N,{class:"flex gap-3"},{default:l(()=>[o(v,{class:"flex-1",disabled:s(i)||s(r),onClick:e[2]||(e[2]=d=>C("USER"))},{default:l(()=>[f(g(s(i)?"Signing in...":"Demo User"),1)]),_:1},8,["disabled"]),o(v,{class:"flex-1",variant:"secondary",disabled:s(i)||s(r),onClick:e[3]||(e[3]=d=>C("ADMIN"))},{default:l(()=>[...e[11]||(e[11]=[f(" Demo Admin ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})])}}});export{de as default};
